<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Senkronize Sanal Mikroskop</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/openseadragon/2.4.2/openseadragon.min.js"></script>
    <style>
        /* Sayfa genelinde margin ve padding ayarlarını sıfırla */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
        }
        
        /* Görüntülerin yer aldığı container */
        #container {
            display: flex;
            justify-content: space-between;
            align-items: stretch;
            height: 100%;
        }
        
        /* Her bir görüntü için ayarlar */
        #openseadragon1, #openseadragon2 {
            width: 50%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="openseadragon1"></div>
        <div id="openseadragon2"></div>
    </div>

    <script type="text/javascript">
        // Önce PR görüntüsünü yükle
        var viewer2 = OpenSeadragon({
            id: "openseadragon2",
            prefixUrl: "https://cdnjs.cloudflare.com/ajax/libs/openseadragon/2.4.2/images/",
            tileSources: "pr/output.dzi",
            showNavigator: true, 
            showRotationControl: true 
        });

        viewer2.addHandler('open', function() {
            // PR yüklendikten sonra HE görüntüsünü yükle
            var viewer1 = OpenSeadragon({
                id: "openseadragon1",
                prefixUrl: "https://cdnjs.cloudflare.com/ajax/libs/openseadragon/2.4.2/images/",
                tileSources: "he/output.dzi",
                showNavigator: true, 
                showRotationControl: true 
            });

            viewer1.addHandler('open', function() {
                // Senkronizasyonu yalnızca her iki görüntü yüklendikten sonra başlat
                synchronizeViewers(viewer2, viewer1);
                synchronizeViewers(viewer1, viewer2);
            });

            // HE görüntüsünü hafifçe kaydırarak PR ile senkronize et
            viewer1.viewport.panBy(new OpenSeadragon.Point(0.01, 0.01)); // X ve Y ekseninde kaydırma
        });

        function synchronizeViewers(master, slave) {
            master.addHandler('zoom', function() {
                slave.viewport.zoomTo(master.viewport.getZoom());
            });
            master.addHandler('pan', function() {
                slave.viewport.panTo(master.viewport.getCenter());
            });
            master.addHandler('rotate', function() {
                slave.viewport.setRotation(master.viewport.getRotation());
            });
        }
    </script>
</body>
</html>
